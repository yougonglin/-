import{h as e,I as t,E as s,o as a,c as i,w as n,i as r,a as o,b as l,d as c,F as h,e as d,j as p,aH as f,x as g,y as m,A as u}from"./index-93e08a2b.js";import{_ as y}from"./n-tabs-h.5c030a13.js";import{r as x}from"./uni-app.es.4a85af97.js";import{_ as b,a as _}from"./n-list.b9d584d3.js";import{_ as k}from"./n-button.3162a993.js";import{h as w,i as j}from"./games.2df69b02.js";import{_ as C}from"./mCheckbox.0955c5e4.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import"./n-badge.17d08f78.js";import"./props.e7779fd1.js";import"./system.0fbb2200.js";import"./usePager.62d200ee.js";import"./n-icon.3d1c4127.js";const v=A({components:{mCheckbox:C},data:()=>({current:0,checkArray:[],mangheList:[],all:"全选",page:1}),methods:{load_more(){this.page++,w(this.current+1,this.page).then((e=>{e.data.data.length?(this.mangheList=this.mangheList.concat(e.data.data),this.$refs.nlist.nEndSuccess(!0)):this.$refs.nlist.nEndSuccess(!1)}))},hsj:e=>Math.floor(e/10),image:e=>JSON.parse(e)[0],toChangeTab(e){this.current=e,this.page=1,this.checkArray=Object.assign([],[]),w(this.current+1,this.page).then((e=>{this.mangheList=Object.assign([],e.data.data)}))},all_select(){let e=this.mangheList;if("全选"==this.all){for(var t=0;t<e.length;t++)e[t].isCheck=1;this.all="全不选"}else{for(t=0;t<e.length;t++)e[t].isCheck=0;this.all="全选"}this.mangheList=Object.assign([],e)},manghe_recovery(){this.checkArray.length?t({title:"提示",content:"您的奖品即将回收!",success:t=>{t.confirm?j(this.checkArray).then((t=>{if("奖品回收失败!"==t.data.data)e({title:"回收失败,请联系客服处理",icon:"error"});else{for(var s=0;s<this.checkArray.length;s++){let e=this.mangheList.findIndex((e=>e.id==this.checkArray[s]));this.mangheList.splice(e,1)}this.checkArray=Object.assign([],[]),e({title:"回收成功"})}})):t.cancel&&console.log("用户点击取消")}}):e({title:"请先选择您的商品！",icon:"none"})},manghe_goods_delivery(){this.checkArray.length?t({title:"提示",content:"每次发货需要您支付30元邮费,建议您选择多件商品一起发货。",success:e=>{if(e.confirm){let e=JSON.stringify(this.checkArray);s({url:"/pages/user/address/index?type=blindBox&id="+e})}}}):e({title:"请先选择商品",icon:"error"})}},onLoad(){w(this.current+1,this.page).then((e=>{this.mangheList=Object.assign([],e.data.data)}))}},[["render",function(e,t,s,w,j,C){const A=x(p("n-tabs-h"),y),v=u,L=r,T=f("m-checkbox"),S=x(p("n-list-cell"),b),O=x(p("n-list"),_),z=x(p("n-button"),k);return a(),i(L,{class:"",style:{"padding-bottom":"188rpx"}},{default:n((()=>[o(A,{tabsStyle:"width: 100% !important;width:750rpx;",class:"pc-tabs-h",justify:"center",isTap:!0,delay:50,value:j.current,items:["待提货","已回收","已发货"],width:"228rpx",indicatorWidth:"100rpx",indicatorHeight:"6rpx",indicatorStyle:"bottom:12rpx;",onChange:C.toChangeTab},null,8,["value","onChange"]),o(O,{down:null,ref:"nlist",style:{"background-color":"white"},onUp:C.load_more},{default:n((()=>[(a(!0),l(h,null,c(j.mangheList,((e,s)=>(a(),i(S,{key:e.id},{default:n((()=>[o(T,{modelValue:j.checkArray,"onUpdate:modelValue":t[0]||(t[0]=e=>j.checkArray=e),id:e.id,isCheck:e.isCheck,title:e.goods_name,image:C.image(e.image)},{body:n((()=>[o(L,{class:"n-flex-row n-justify-between n-ms-top-ll"},{default:n((()=>[o(v,{style:{"font-size":"24rpx"}},{default:n((()=>[g("抽奖费用：")])),_:1}),o(v,{style:{"font-weight":"800",color:"#ff495d","font-size":"24rpx"}},{default:n((()=>[g(m(e.price)+"元",1)])),_:2},1024)])),_:2},1024),o(L,{class:"n-flex-row n-justify-between n-ms-top-ll"},{default:n((()=>[o(v,{style:{"font-size":"24rpx"}},{default:n((()=>[g("回收价格：")])),_:1}),o(v,{style:{"font-weight":"800",color:"#ff495d","font-size":"24rpx"}},{default:n((()=>[g(m(C.hsj(e.price))+"元",1)])),_:2},1024)])),_:2},1024),o(L,{class:"n-flex-row n-justify-between n-ms-top-ll"},{default:n((()=>[o(v,{style:{"font-size":"24rpx"}},{default:n((()=>[g("开盒时间：")])),_:1}),o(v,{style:{"font-weight":"800",color:"#ff495d","font-size":"24rpx"}},{default:n((()=>[g(m(e.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","id","isCheck","title","image"])])),_:2},1024)))),128))])),_:1},8,["onUp"]),0===j.current?(a(),i(L,{key:0,style:{position:"fixed",bottom:"0",display:"flex","flex-flow":"row",padding:"16rpx","justify-content":"space-around",width:"750rpx","background-color":"white"}},{default:n((()=>[o(L,{class:"n-flex-row",style:{width:"168rpx"},onClick:t[2]||(t[2]=()=>{})},{default:n((()=>[o(z,{onButtonClicked:t[1]||(t[1]=e=>C.all_select()),style:{flex:"1"},bgType:"error",textType:"inverse",border:"none",text:j.all,boxStyle:"width:168rpx"},null,8,["text"])])),_:1}),o(L,{class:"n-flex-row",style:{width:"520rpx",height:"84rpx"}},{default:n((()=>[o(z,{onButtonClicked:C.manghe_recovery,style:{flex:"1","margin-right":"12rpx"},bgType:"warning",textType:"inverse",border:"none",text:"一键回收",boxStyle:"width:230rpx"},null,8,["onButtonClicked"]),o(z,{onButtonClicked:C.manghe_goods_delivery,style:{flex:"1"},bgType:"success",textType:"inverse",border:"none",text:"申请发货",boxStyle:"width:230rpx"},null,8,["onButtonClicked"])])),_:1})])),_:1})):d("",!0)])),_:1})}]]);export{v as default};
