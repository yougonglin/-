import{am as e,j as t,o as a,c as n,w as i,a as r,x as s,y as l,e as u,q as o,b as c,F as p,d as g,A as d,P as h,an as x,i as m,r as f,l as _,g as v,u as k,S as I,E as P,k as y}from"./index-93e08a2b.js";import{_ as S}from"./uni-icons.b6502b45.js";import{r as b,a as C}from"./uni-app.es.4a85af97.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import{z as w}from"./z-image.699da878.js";import{g as T}from"./goodsClubCell.56a5ebb5.js";import{g as N}from"./shop.2af922b6.js";import{t as j}from"./util.84ba036b.js";/* empty css                                                                */import"./props.e7779fd1.js";const R={en:{"uni-pagination.prevText":"prev","uni-pagination.nextText":"next","uni-pagination.piecePerPage":"piece/page"},es:{"uni-pagination.prevText":"anterior","uni-pagination.nextText":"prxima","uni-pagination.piecePerPage":"Art��culo/P��gina"},fr:{"uni-pagination.prevText":"précédente","uni-pagination.nextText":"suivante","uni-pagination.piecePerPage":"Articles/Pages"},"zh-Hans":{"uni-pagination.prevText":"上一页","uni-pagination.nextText":"下一页","uni-pagination.piecePerPage":"条/页"},"zh-Hant":{"uni-pagination.prevText":"上一頁","uni-pagination.nextText":"下一頁","uni-pagination.piecePerPage":"條/頁"}},{t:A}=e(R);const L=z({name:"UniPagination",emits:["update:modelValue","input","change","pageSizeChange"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},prevText:{type:String},nextText:{type:String},piecePerPageText:{type:String},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1},showPageSize:{type:[Boolean,String],default:!1},pagerCount:{type:Number,default:7},pageSizeRange:{type:Array,default:()=>[20,50,100,500]}},data:()=>({pageSizeIndex:0,currentIndex:1,paperData:[],pickerShow:!1}),computed:{piecePerPage(){return this.piecePerPageText||A("uni-pagination.piecePerPage")},prevPageText(){return this.prevText||A("uni-pagination.prevText")},nextPageText(){return this.nextText||A("uni-pagination.nextText")},maxPage(){let e=1,t=Number(this.total),a=Number(this.pageSize);return t&&a&&(e=Math.ceil(t/a)),e},paper(){const e=this.currentIndex,t=this.pagerCount,a=this.total,n=this.pageSize;let i=[],r=[],s=Math.ceil(a/n);for(let u=0;u<s;u++)i.push(u+1);r.push(1);const l=i[i.length-(t+1)/2];return i.forEach(((a,n)=>{(t+1)/2>=e?a<t+1&&a>1&&r.push(a):e+2<=l?a>e-(t+1)/2&&a<e+(t+1)/2&&r.push(a):(a>e-(t+1)/2||s-t<a)&&a<i[i.length-1]&&r.push(a)})),s>t?((t+1)/2>=e?r[r.length-1]="...":e+2<=l?(r[1]="...",r[r.length-1]="..."):r[1]="...",r.push(i[i.length-1])):(t+1)/2>=e||e+2<=l||(r.shift(),r.push(i[i.length-1])),r}},watch:{current:{immediate:!0,handler(e,t){this.currentIndex=e<1?1:e}},value:{immediate:!0,handler(e){1===Number(this.current)&&(this.currentIndex=e<1?1:e)}},pageSizeIndex(e){this.$emit("pageSizeChange",this.pageSizeRange[e])}},methods:{pickerChange(e){this.pageSizeIndex=e.detail.value,this.pickerClick()},pickerClick(){const e=document.querySelector("body");if(!e)return;const t="uni-pagination-picker-show";this.pickerShow=!this.pickerShow,this.pickerShow?e.classList.add(t):setTimeout((()=>e.classList.remove(t)),300)},selectPage(e,t){if(parseInt(e))this.currentIndex=e,this.change("current");else{let e=Math.ceil(this.total/this.pageSize);if(t<=1)return void(this.currentIndex-5>1?this.currentIndex-=5:this.currentIndex=1);if(t>=6)return void(this.currentIndex+5>e?this.currentIndex=e:this.currentIndex+=5)}},clickLeft(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight(){Number(this.currentIndex)>=this.maxPage||(this.currentIndex+=1,this.change("next"))},change(e){this.$emit("input",this.currentIndex),this.$emit("update:modelValue",this.currentIndex),this.$emit("change",{type:e,current:this.currentIndex})}}},[["render",function(e,f,_,v,k,I){const P=d,y=b(t("uni-icons"),S),C=h,z=x,w=m;return a(),n(w,{class:"uni-pagination"},{default:i((()=>[!0===_.showPageSize||"true"===_.showPageSize?(a(),n(z,{key:0,class:"select-picker",mode:"selector",value:k.pageSizeIndex,range:_.pageSizeRange,onChange:I.pickerChange,onCancel:I.pickerClick,onClick:I.pickerClick},{default:i((()=>[r(C,{type:"default",size:"mini",plain:!0},{default:i((()=>[r(P,null,{default:i((()=>[s(l(_.pageSizeRange[k.pageSizeIndex])+" "+l(I.piecePerPage),1)])),_:1}),r(y,{class:"select-picker-icon",type:"arrowdown",size:"12",color:"#999"})])),_:1})])),_:1},8,["value","range","onChange","onCancel","onClick"])):u("",!0),r(w,{class:"uni-pagination__total is-phone-hide"},{default:i((()=>[s("共 "+l(_.total)+" 条",1)])),_:1}),r(w,{class:o(["uni-pagination__btn",1===k.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":1===k.currentIndex?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:I.clickLeft},{default:i((()=>[!0===_.showIcon||"true"===_.showIcon?(a(),n(y,{key:0,color:"#666",size:"16",type:"left"})):(a(),n(P,{key:1,class:"uni-pagination__child-btn"},{default:i((()=>[s(l(I.prevPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"]),r(w,{class:"uni-pagination__num uni-pagination__num-flex-none"},{default:i((()=>[r(w,{class:"uni-pagination__num-current"},{default:i((()=>[r(P,{class:"uni-pagination__num-current-text is-pc-hide current-index-text"},{default:i((()=>[s(l(k.currentIndex),1)])),_:1}),r(P,{class:"uni-pagination__num-current-text is-pc-hide"},{default:i((()=>[s("/"+l(I.maxPage||0),1)])),_:1}),(a(!0),c(p,null,g(I.paper,((e,t)=>(a(),n(w,{key:t,class:o([{"page--active":e===k.currentIndex},"uni-pagination__num-tag tag--active is-phone-hide"]),onClick:a=>I.selectPage(e,t)},{default:i((()=>[r(P,null,{default:i((()=>[s(l(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),r(w,{class:o(["uni-pagination__btn",k.currentIndex>=I.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":k.currentIndex===I.maxPage?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:I.clickRight},{default:i((()=>[!0===_.showIcon||"true"===_.showIcon?(a(),n(y,{key:0,color:"#666",size:"16",type:"right"})):(a(),n(P,{key:1,class:"uni-pagination__child-btn"},{default:i((()=>[s(l(I.nextPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"])])),_:1})}],["__scopeId","data-v-bd0b20fd"]]),$=z({__name:"index",setup(e){let s=f(1),l=f(0),u=f(""),o=f([]),d=f([]);function h(){N(s.value,u.value).then((e=>{o.value=e.data.data.result,l.value=e.data.data.c}))}function x(e){s.value=e.current,h()}let S=_((()=>e=>JSON.parse(e)[0]));return C((e=>{let t=setInterval((()=>{v().globalData.config&&(d.value=v().globalData.config.shop.vipSwiperItems,u.value=e.cate_id,h(),clearInterval(t))}),100)})),(e,s)=>{const u=y,h=I,f=m,_=b(t("uni-pagination"),L);return a(),n(f,{class:""},{default:i((()=>[r(h,{class:"swiper n-ms-bottom-base",circular:"","indicator-dots":!0,autoplay:!0,interval:3e3},{default:i((()=>[(a(!0),c(p,null,g(k(d),((e,t)=>(a(),n(u,{onClick:t=>{return a=e.url,void j(a);var a}},{default:i((()=>[r(w,{src:e.img,mode:"scaleToFill",class:"swiper-item"},null,8,["src"])])),_:2},1032,["onClick"])))),256))])),_:1}),r(f,{class:"",style:{display:"flex",flex:"1 1 320rpx","flex-flow":"row wrap","margin-left":"20rpx"}},{default:i((()=>[(a(!0),c(p,null,g(k(o),((e,t)=>(a(),n(f,{key:e.id,style:{width:"360rpx"},onClick:t=>{return a=e.id,void P({url:"/pages/shop/mall/details?id="+a});var a}},{default:i((()=>[r(f,{class:"",style:{width:"360rpx"}},{default:i((()=>[r(T,{cache:!0,tags:"优惠:3元",cover:k(S)(e.image),name:e.goods_name,sale:e.price,price:e.price},null,8,["cover","name","sale","price"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),r(_,{onChange:x,class:"n-ms-top-ll n-ms-base",total:k(l),pageSize:"30"},null,8,["total"])])),_:1})}}},[["__scopeId","data-v-5ae0384c"]]);export{$ as default};
