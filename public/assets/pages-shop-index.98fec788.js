import{r as e,g as o,o as s,c as t,w as r,i as a,a as i,b as l,d as n,F as c,u as p,e as u,f as m,s as d,h as _,S as g,j as f,n as b,k as w}from"./index-93e08a2b.js";import{_ as h}from"./n-grid-static.16b36c84.js";import{o as v,r as x}from"./uni-app.es.4a85af97.js";import{_ as F,a as j}from"./n-waterfall.fb290c77.js";import{_ as k}from"./uni-popup-dialog.b8b7735f.js";import{_ as C}from"./uni-popup.3ddebe78.js";import{z as A}from"./z-image.699da878.js";import{p as I}from"./pcToWeb.b1a5f010.js";import{g as M}from"./goodsClubCell.56a5ebb5.js";import{t as y}from"./util.84ba036b.js";import{g as T,v as z}from"./common.b5c70975.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./n-icon.3d1c4127.js";import"./props.e7779fd1.js";import"./n-badge.17d08f78.js";import"./usePager.62d200ee.js";import"./system.0fbb2200.js";/* empty css                                                                */import"./u-qrcode.710744ab.js";import"./bulletinBoard.bc6e3929.js";import"./n-bg-view.98391b2e.js";const N=D({__name:"index",setup(D){let N=e(!1);const G=e([]);let Q=e([]);function S(e){uni.report("shopIndexGrid",e.item.name);let o=e.item.url;if("wmhb"==o){N.value=!0;let e=m("wxScheme_supernova");if(console.log(e),e&&(e=JSON.parse(e),e.expire_time>Math.ceil((new Date).getTime()/1e3)))return void y(e.url);T().then((o=>{let s=JSON.parse(o.data.data);"ok"==s.errmsg?(e='{"url" : "'+s.openlink+'","expire_time" : '+(Math.ceil((new Date).getTime()/1e3)+2505600)+"}",d("wxScheme_supernova",e),y(s.openlink)):_({title:"打开红包小程序失败,请联系客服反馈",icon:"none",duration:5e3})}))}else"xr"==o?(o="snssdk1128://webcast_webview?ecom_cps_track=Cj0IABDoCBooZHlfMTA3MjM0NjEwOTAxNTY2MjQzMTI3XzI2MzQwXzQyMDM4NzA2NiIAMAA6AEIAYgQxMzUwEgUI8wcQCCIA&ecom_report=1&forbid_right_back=1&hide_nav_bar=1&status_bar_color=white&trans_status_bar=1&type=fullscreen&url=https%3A%2F%2Flf-webcast-sourcecdn-tos.bytegecko.com%2Fobj%2Fbyte-gurd-source%2Fecom%2Fug%2Fwebcast%2Ffe_growth_gecko_h5%2Fpages%2FNewerCustomer%2Findex.html%3Fenter_from%3Ddouke%26entrance_info%3D%257B%2522ecom_scene_id%2522%253A%25221350%2522%257D%26force_insert_product_ids%3D3543563244641852059%252C3610581427890059323%252C3479749689459492696&use_bdx=1",y(o),y("snssdk2329://webcast_webview?ecom_cps_track=Cj0IABDoCBooZHlfMTA3MjM0NjEwOTAxNTY2MjQzMTI3XzI2MzQwXzQyMDM4NzA2NiIAMAA6AEIAYgQxMzUwEgUI8wcQCCIA&ecom_report=1&forbid_right_back=1&hide_nav_bar=1&status_bar_color=white&trans_status_bar=1&type=fullscreen&url=https%3A%2F%2Flf-webcast-sourcecdn-tos.bytegecko.com%2Fobj%2Fbyte-gurd-source%2Fecom%2Fug%2Fwebcast%2Ffe_growth_gecko_h5%2Fpages%2FNewerCustomer%2Findex.html%3Fenter_from%3Ddouke%26entrance_info%3D%257B%2522ecom_scene_id%2522%253A%25221350%2522%257D%26force_insert_product_ids%3D3543563244641852059%252C3610581427890059323%252C3479749689459492696&use_bdx=1")):y(o)}let B=e([]);function E(e){y("/pages/shop/subsidy/index?goods="+e)}let P=e(null);function U(e){console.log(e),"close"==e.trim()?P.value.close():""==e.trim()?_({title:"请输入商品名称进行搜索体验",duration:5e3,icon:"none"}):(P.value.close(),y("/pages/shop/subsidy/index?goods="+e))}const H=e(null);return v((()=>{let e=setInterval((()=>{if(o().globalData.config){if(G.value=o().globalData.config.shop.indexSwiperItems,Q.value=o().globalData.config.shop.indexGrid,B.value=o().globalData.config.shop.selectedProducts,b((()=>{H.value.clear(),H.value.set(B.value)})),clearInterval(e),!m("app_active")){let e=m("oaid");e&&z(e),P.value.open(),d("app_active","over")}}}),100)})),(e,o)=>{const m=w,d=g,_=x(f("n-grid-static"),h),b=x(f("n-waterfall-view"),F),v=x(f("n-waterfall"),j),T=x(f("uni-popup-dialog"),k),z=x(f("uni-popup"),C),D=a;return s(),t(D,{class:""},{default:r((()=>[i(d,{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:3e3},{default:r((()=>[(s(!0),l(c,null,n(G.value,((e,o)=>(s(),t(m,{onClick:o=>{return s=e.url,void y(s);var s}},{default:r((()=>[i(A,{src:e.img,mode:"scaleToFill",class:"swiper-item"},null,8,["src"])])),_:2},1032,["onClick"])))),256))])),_:1}),i(_,{onItemClicked:S,hasLine:!1,border:"none",items:p(Q),columns:4,isIcon:!0,iconLabel:"icon",iconType:"error",iconSize:"ll",textLabel:"name",space:"24rpx",itemHeight:"160rpx",boxStyle:"background-color:#FFFFFF;"},null,8,["items"]),p(N)?(s(),t(I,{key:0,redirectUrl:"pages/shop/index"})):u("",!0),i(v,{down:null,up:null,noMoreText:"没有更多了",sameHeight:!0,height:"window",ref:"ins",bgType:"inverse",columnCount:2,leftGap:"20rpx",rightGap:"20rpx",columnGap:"10rpx"},{default:r((()=>[i(b,{sameHeight:!0,ref_key:"water",ref:H,leftGap:"20rpx",rightGap:"20rpx",columnGap:"10rpx"},{left:r((({lefts:e})=>[(s(!0),l(c,null,n(e,((e,o)=>(s(),t(M,{onClick:o=>E(e.goodsTitle),members:[],tags:"返还"+e.promotionAmount/100+"元,销量:"+e.salesTip,cover:e.goodsImageUrl,name:e.goodsTitle,sale:e.zkGoodsPrice/100,price:e.goodsPrice/100},null,8,["onClick","tags","cover","name","sale","price"])))),256))])),right:r((({rights:e})=>[(s(!0),l(c,null,n(e,((e,o)=>(s(),t(M,{onClick:o=>E(e.goodsTitle),members:[],tags:"返还"+e.promotionAmount/100+"元,销量:"+e.salesTip,cover:e.goodsImageUrl,name:e.goodsTitle,sale:e.zkGoodsPrice/100,price:e.goodsPrice/100},null,8,["onClick","tags","cover","name","sale","price"])))),256))])),_:1},512)])),_:1},512),i(z,{ref_key:"inputClose",ref:P,type:"dialog",animation:!1},{default:r((()=>[i(T,{mode:"input",title:"以前都买贵了,为您查询全网最低价",placeholder:"请输入商品名称,商品越贵返利越多","before-close":!0,onClose:o[0]||(o[0]=e=>U("close")),onConfirm:U})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-d8a8d666"]]);export{N as default};
