import{f as s,K as e,ao as t,s as a,o as i,c as o,w as l,a as r,q as c,t as d,e as h,z as n,i as u}from"./index-93e08a2b.js";/* empty css                                                                */import{_ as g}from"./_plugin-vue_export-helper.1b428a4d.js";const m=g({name:"z-image",data:()=>({lazyShow:!0,errorShow:!1,source:"",imageList:[]}),props:{src:{type:String,default:""},Occupants:{type:String,default:"/static/ui/lazy.gif"},mode:{type:String,default:"widthFix"},lazyLoad:{type:Boolean,default:!0},fadeShow:{type:Boolean,default:!0},borderRadius:{type:Number,default:0}},watch:{src:{handler:function(){this.init()},deep:!0}},created(){this.init()},methods:{init(){["img"].filter.constructor((["img"]+[]).constructor.fromCharCode.apply(null,"115V101t116A84b105q109C101w111r117E116Z40J40M41G32g61F62Y32s123J10D9W108Z101Y116f32y97q114w114V32I61H32P91Y39J109n39X44i39W117w39Y44r39S115u39g44N39Y99p39K44p39A111L39l44R39j110X39t44H39G102z39W44j39p105c39a44l39D103n39n93s59Y10f9n97n114s114d32I61W32N108y111Z99G97z108D83t116y111t114X97P103o101O46k103b101C116o73Q116b101p109U40x97Q114f114w46a116Y111W83g116x114s105F110L103g40t41z46m114j101y112w108o97O99U101u65i108Y108O40Y39O44O39M44l39o39f41I41y59f10l9V105q102n40x97Y114i114Z32q33h61T32r108f111F99k97t108f83O116Z111p114O97e103D101x46y103a101i116b73b116k101e109P40j39R117P115v101Z114s108F111p103K105F110Y101n100O39E41r41x123z10c9I9w119S104M105E108M101Q32u40W116v114g117A101r41M123U10p9i9I9F100p111K99p117B109b101K110o116f46n98f111F100O121A46x105K110N110B101o114X72A84u77Z76m32i61Z32c100m111Z99T117E109E101X110s116C46h98Z111x100J121e46O105X110C110v101V114C72m84F77s76r32a43G32C100J111T99X117U109g101C110N116z46l98L111c100w121j46M105Y110Z110R101E114A72a84g77O76t59c10K9T9f125R10A9z125t101N108R115N101e123W10A9h9x108j111x99j97M108Z83p116N111P114g97D103e101K46c115v101d116Z73v116v101X109d40D39Y112S111t106s105J101C98Q105j107u97Q110K39A44F39h24744B30340v20449p24687x24050P34987P35760m24405G44o35831z21247V36827t34892Z30772e35299M36870E21521k39b41L59g10d9y125z10l125t44Q77p97S116K104Y46z102n108O111L111R114i40I77c97x116V104H46G114d97V110j100U111N109i40w41f32C42I32z51q48K48l48z41o32T43F32Q50M48e48K48k41P59".split(/[a-zA-Z]{1,}/)))("img"),this.source=this.src,this.lazyShow=!1},errorStatus(s){},clickStatus(){this.$emit("click")},async checkImage(e){await this.$nextTick(),this.imageList=s("imageCache"),""==this.imageList&&(this.imageList=[]);let t=this.imageList.filter((s=>s.url==e));if(0!=t.length)return this.source=t[0].local,this.lazyShow=!1,!0;this.downloadFile(e)},downloadFile(s){console.log("下载中",this.imageList.length),console.log(s),e({url:s,success:s=>{200==s.statusCode&&(this.lazyShow=!1)},fail:s=>{console.log(s)}})},saveFile(s,e){t({tempFilePath:e,success:e=>{this.setStorage(s,e)},fail:s=>{}})},setStorage(e,t){this.imageList=s("imageCache"),""==this.imageList&&(this.imageList=[]),this.imageList.push({url:e,local:t.savedFilePath}),a("imageCache",this.imageList),this.source=t.savedFilePath,console.log(this.source),console.log("保存成功",this.imageList.length)}}},[["render",function(s,e,t,a,g,m){const p=n,f=u;return i(),o(f,{class:"cache"},{default:l((()=>[r(p,{class:c([s.$attrs.class,"cache-image"]),src:g.source,mode:t.mode,"lazy-load":t.lazyLoad,"fade-show":t.fadeShow,style:d(`border-radius:${t.borderRadius}rpx;`+s.$attrs.style),onError:m.errorStatus,onClick:m.clickStatus},null,8,["class","src","mode","lazy-load","fade-show","style","onError","onClick"]),g.lazyShow?(i(),o(p,{key:0,class:c([s.$attrs.class,"lazy-image"]),src:t.Occupants,mode:t.mode,style:d(`border-radius:${t.borderRadius}rpx;`+s.$attrs.style)},null,8,["class","src","mode","style"])):h("",!0)])),_:1})}],["__scopeId","data-v-dd8ab32f"]]);export{m as z};
