import{l as e,o as t,c as s,w as a,a as r,q as l,t as n,u as o,i,N as p,v as u,r as d,B as c,ay as g,s as f,aD as x,x as h,y as m,b as y,d as b,F as _,aE as w,h as v,aF as S,g as j,I as C,E as T,aG as B,z as k,A as D,j as F}from"./index-93e08a2b.js";import{a as I,r as L}from"./uni-app.es.4a85af97.js";import{a as O}from"./system.0fbb2200.js";import{m as $}from"./props.e7779fd1.js";import{_ as H}from"./n-button.3162a993.js";import{_ as N}from"./uni-popup-dialog.b8b7735f.js";import{_ as z}from"./uni-popup.3ddebe78.js";import{b as A}from"./bulletinBoard.bc6e3929.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./n-icon.3d1c4127.js";import"./n-bg-view.98391b2e.js";const J={__name:"n-progress",props:{progress:{type:Number,default:0},width:{type:String,default:"600rpx"},height:{type:String,default:"12rpx"},bgType:{type:String,default:"light"},progressHeight:{type:String,default:"12rpx"},progressBgType:{type:String,default:"primary"},boxStyle:{type:String,default:""},progressStyle:{type:String,default:""},boxClass:{type:String,default:""},progressClass:{type:String,default:""}},setup(p){const u=p,d=e((()=>{if(0===u.progress)return"width: 0;";if(u.progress>=1)return`width:${u.width};`;if(u.width.indexOf("rpx")>=0||u.width.indexOf("upx")>=0){return`width:${parseFloat(u.width)*u.progress}rpx;`}return`width:${parseFloat(u.width)*u.progress}px;`}));return(e,u)=>{const c=i;return t(),s(c,{class:l(["n-flex-row","n-align-center","n-bg-"+p.bgType,p.boxClass]),style:n(p.boxStyle+"width:"+p.width+";height:"+p.height+";")},{default:a((()=>[r(c,{class:l(["n-bg-"+p.progressBgType,p.progressClass]),style:n(p.progressStyle+"height:"+p.progressHeight+";"+o(d))},null,8,["class","style"])])),_:1},8,["class","style"])}}},q={__name:"n-scroll-h",props:$(["bgType",["width","750rpx"],["height","260rpx"],["left","0"],"boxStyle","contentStyle","boxClass","contentClass"]),setup(d){const c=d,g=e((()=>O(c.left))),f=e((()=>{let e="width:"+c.width+";";return e+="height:"+c.height+";",e+c.boxStyle}));return(e,d)=>{const c=i,x=p;return t(),s(x,{scroll:!1,"scroll-x":!0,"scroll-left":o(g),"scroll-with-animation":!0,"show-scrollbar":!1,class:l(["n-bg-"+e.bgType,e.boxClass]),style:n(o(f))},{default:a((()=>[r(c,{class:l(["n-flex-row","n-wrap-nowrap",e.contentClass]),style:n(e.contentStyle)},{default:a((()=>[u(e.$slots,"default")])),_:3},8,["class","style"])])),_:3},8,["scroll-left","class","style"])}}},G=E({__name:"index",setup(l){let p=d([]),u=c({data:{}}),O=d(0);const $=d([{title:"月卡",price:299.99},{title:"半年卡",price:1299},{title:"年卡",price:1999}]);let E=d(0);const G=d(null),K=d(null),P=e((()=>{let e="";for(let t=0;t<p.value.length;t++)e=e+"Lv."+p.value[t].grade+":"+p.value[t].commission+"%<br><br>";return"提升等级可通过邀请好友和银币兑换的方式<br><br>等级越高，提现手续费越低。分别是：<br><br>"+e})),R=e((()=>e=>O.value==e?"#fef7ec":"white"));function V(e){(e=e.trim())?w(e).then((e=>{e.data.data?v({title:"升级成功"}):v({title:"升级失败,银币不足!",icon:"error"})})):v({title:"你没有输入升级数量",icon:"error"})}function W(){S(O.value).then((e=>{e.data.data[1]>0&&(j().globalData.userBaseInfo.vip_expires=e.data.data[1]),C({title:"支付提示",content:e.data.data[0],confirmText:"充值余额",success:e=>{e.confirm&&T({url:"/pages/user/recharge/index"})}})}))}const M=e((()=>e=>{let t=Date.parse(new Date).toString();return t=t.substr(0,10),e>t?B(e,"-"):"未开通"})),Q=e((()=>(e,t)=>{for(let s=0;s<p.value.length;s++)if(p.value[s].min<=e&&p.value[s].max>=e)return E.value=(e/p.value[s].max).toFixed(1),"grade"==t?p.value[s].grade:"commission"==t?p.value[s].commission:p.value[s+1]?p.value[s+1].min:p.value[s].max}));return I((()=>{g().then((e=>{u.data=e.data.data,f("userBaseInfo",JSON.stringify(e.data.data))})).catch((e=>{console.log(e)})),x().then((e=>{p.value=e.data.data}))})),(e,l)=>{const p=k,d=D,c=i,g=L(F("n-progress"),J),f=L(F("n-scroll-h"),q),x=L(F("n-button"),H),w=L(F("uni-popup-dialog"),N),v=L(F("uni-popup"),z);return t(),s(c,{class:""},{default:a((()=>[r(c,{class:"n-flex-row n-justify-between header",style:{"margin-top":"32rpx"}},{default:a((()=>[r(c,{class:"n-flex-column"},{default:a((()=>[r(p,{src:"/assets/svip2-3b90ce5d.png",mode:"scaleToFill",style:{width:"108rpx",height:"36rpx","margin-bottom":"10rpx","margin-top":"6rpx"}}),r(d,{class:"text"},{default:a((()=>[h(m(o(M)(o(u).data.vip_expires)),1)])),_:1})])),_:1}),r(c,{class:"n-flex-column"},{default:a((()=>[r(d,{style:{"font-weight":"800",color:"#f3257a","text-align":"center","margin-bottom":"8rpx"}},{default:a((()=>[h(m(o(Q)(o(u).data.experience,"commission"))+"%",1)])),_:1}),r(d,{class:"text"},{default:a((()=>[h("提现费率")])),_:1})])),_:1})])),_:1}),r(c,{class:"card"},{default:a((()=>[r(c,{class:"n-flex-row n-justify-between"},{default:a((()=>[r(d,{class:"text-weight",style:{"padding-top":"12rpx"}},{default:a((()=>[h("经验值")])),_:1})])),_:1}),r(g,{progress:o(E),progressBgType:"success",progressStyle:"border-radius: 56rpx;",boxStyle:"border-radius: 56rpx;margin-top:32rpx;margin-bottom:32rpx;",progressHeight:"32rpx",height:"32rpx",width:"656rpx"},null,8,["progress"]),r(c,{class:"n-flex-row n-justify-between"},{default:a((()=>[r(d,{class:"text-weight"},{default:a((()=>[h("Lv."+m(o(Q)(o(u).data.experience,"grade")),1)])),_:1}),r(d,{class:"text-weight",style:{color:"gray"}},{default:a((()=>[h("经验值:"+m(o(u).data.experience)+"/"+m(o(Q)(o(u).data.experience)),1)])),_:1}),r(d,{class:"text-weight"},{default:a((()=>[h("Lv."+m(o(Q)(o(u).data.experience,"grade")+1),1)])),_:1})])),_:1})])),_:1}),r(c,{class:"card",style:{"margin-top":"0"}},{default:a((()=>[r(f,{width:"656rpx",height:"auto"},{default:a((()=>[(t(!0),y(_,null,b($.value,((e,l)=>(t(),s(c,{style:n({"background-color":o(R)(l)}),class:"n-flex-column n-radius-base price-card",onClick:e=>{return t=l,void(O.value=t);var t}},{default:a((()=>[r(d,{class:"n-text-align-center",style:{color:"#754e19","margin-bottom":"26rpx"}},{default:a((()=>[h(m(e.title),1)])),_:2},1024),r(c,{class:"n-flex-row n-align-center"},{default:a((()=>[r(d,{class:"n-text-align-center",style:{color:"#754e19","font-weight":"800"}},{default:a((()=>[h("￥")])),_:1}),r(d,{class:"n-text-align-center",style:{color:"#754e19","font-size":"48rpx","font-weight":"800"}},{default:a((()=>[h(m(e.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style","onClick"])))),256))])),_:1}),r(x,{class:"n-ms-top-ll",onButtonClicked:W,bgType:"warning",textType:"inverse",border:"none",text:"开通/续费"})])),_:1}),r(A,{title:"VIP用途",description:"1.可使用更高级的对象筛选功能"}),r(A,{title:"会员等级用途",description:o(P)},null,8,["description"]),r(v,{ref_key:"inputDialog",ref:G,type:"dialog"},{default:a((()=>[r(w,{ref_key:"inputClose",ref:K,mode:"input",title:"银币数量:"+o(u).data.yinbi_num,placeholder:"1银币=1经验,请输入数量",onConfirm:V},null,8,["title"])])),_:1},512)])),_:1})}}},[["__scopeId","data-v-c6cf4f17"]]);export{G as default};
