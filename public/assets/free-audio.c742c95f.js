import{a1 as t,a2 as s,a3 as e,o as i,c as a,w as n,a as o,e as r,x as c,y as u,z as h,i as d,a4 as l}from"./index-93e08a2b.js";import{_ as p}from"./_plugin-vue_export-helper.1b428a4d.js";const x=p({data:()=>({context:null,currentTime:0,duration:100,status:!1}),props:{url:String,activeColor:{type:String,default:"#0E7EFC"},startPic:{type:String,default:"/static/ui/play.png"},endPic:{type:String,default:"/static/ui/stop.png"},audioId:[String,Number]},watch:{url(t,s){this.context.src=t}},created(){this.context=t(),this.context.src=this.url,this.onTimeUpdate(),this.onCanplay(),this.onEnded(),s("stop",(t=>{t&&t!=this.audioId?(this.context.stop(),this.status=!1):t||(this.context.stop(),this.status=!1)}))},beforeDestroy(){this.destroy()},methods:{start(t){console.log(this.context.src),this.status?(this.context.pause(),this.status=!this.status):(e("stop",t),this.context.play(),this.status=!this.status)},onCanplay(){this.context.onCanplay((()=>{this.context.duration,setTimeout((()=>{this.duration=this.context.duration}),1e3)}))},onTimeUpdate(){this.context.onTimeUpdate((()=>{Number.isFinite(this.context.duration)?(this.duration=this.context.duration,this.currentTime=this.context.currentTime):(this.duration=this.context.currentTime+10,this.currentTime=this.context.currentTime)}))},onEnded(){this.context.onEnded((()=>{this.status=!1,this.currentTime=0}))},changeAudio(t){let s=this.context.paused;this.context.pause(),this.context.seek(t.detail.value),s||this.context.play()},getTime(t){let s=parseInt(t/60),e=t%60;return this.towNum(s)+":"+this.towNum(e)},towNum:t=>t>=10?t:"0"+t,destroy(){this.context.destroy()}}},[["render",function(t,s,e,p,x,m){const y=h,g=d,T=l;return e.url?(i(),a(g,{key:0,class:"flex justify-between align-center audio"},{default:n((()=>[o(g,{class:"mr-3",onClick:s[0]||(s[0]=t=>m.start(e.audioId))},{default:n((()=>[x.status?r("",!0):(i(),a(y,{key:0,src:e.startPic,class:"icon"},null,8,["src"])),x.status?(i(),a(y,{key:1,src:e.endPic,class:"icon"},null,8,["src"])):r("",!0)])),_:1}),o(g,{class:"flex-1"},{default:n((()=>[o(T,{onChange:m.changeAudio,activeColor:e.activeColor,min:0,max:x.duration.toFixed(0),value:x.currentTime.toFixed(0),step:.1},null,8,["onChange","activeColor","max","value","step"])])),_:1}),o(g,{class:"ml-3"},{default:n((()=>[c(u(m.getTime(Math.round(x.currentTime))),1)])),_:1})])),_:1})):r("",!0)}],["__scopeId","data-v-b6aba34c"]]);export{x as C};
