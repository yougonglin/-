import{r as e,l as t,ax as a,m as s,aI as l,o as i,c as n,w as r,q as o,t as d,u as c,b3 as u,N as y,a as f,v as p,e as x,b,d as v,F as g,n as h,i as m,j as w,x as T,y as C,A as S}from"./index-93e08a2b.js";import{_}from"./n-badge.17d08f78.js";import{r as I}from"./uni-app.es.4a85af97.js";import{a as z}from"./system.0fbb2200.js";import{m as j}from"./props.e7779fd1.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";const L=k({__name:"n-tabs-h",props:j([["items",[]],["value",0],["last",0],"textLabel",["offset",0],["swiperWidth","750rpx"],["isTap",!0],["justify","start"],["scrollSize","750rpx"],["textSize","base"],["activeTextSize","base"],["bgType","inverse"],["textType","text"],["activeTextType","primary"],["height","80rpx"],["width","120rpx"],["left","0"],["right","0"],["space","0px"],"border",["badgeConfig",{}],["hasIndicator",!0],["indicatorType","primary"],["indicatorWidth","80rpx"],["indicatorHeight","5rpx"],["indicatorRadius","4rpx"],["absIndicator",!0],"boxStyle","tabsStyle","textStyle","activeTextStyle","itemStyle","activeItemStyle","indicatorStyle",["updateTime",0],["delay",-1],["updateDelay",-1],["hoverTop",!1],"boxClass","tabsClass","textClass","activeTextClass","itemClass","activeItemClass","indicatorClass"]),emits:["update:value","change"],setup(j,{emit:k}){const L=j,$=e(0),W=e(0),D=e({}),A=e(0),H=e(null),M=e(null);let R=null;const{proxy:q}=u();const F=t((()=>{let e=`border-radius:${L.indicatorRadius};`;return e+=`height:${L.indicatorHeight};`,e+=`width:${$.value}px;`,e+=`left:${W.value}px;`,e+L.indicatorStyle})),J=t((()=>z(L.space))),N=t((()=>z(L.scrollSize))),O=t((()=>z(L.width))),P=t((()=>z(L.height))),B=t((()=>{if(parseInt(L.indicatorWidth)>0)return!0;return parseInt(L.width)>0})),E=t((()=>{if(parseInt(L.indicatorWidth)>0)return L.indicatorWidth;return parseInt(L.width)>0?L.width:"0"})),G=t((()=>z(E.value))),K=t((()=>"width:"+N.value+"px;"+L.boxStyle)),Q=t((()=>{let e="";return"start"!=L.justify&&(e+="width:"+N.value+"px;"),e+L.tabsStyle})),U=t((()=>{let e=`height:${P.value}px;`;return e+=parseInt(L.width)>0?`width:${O.value}px;margin-right:${J.value}px;`:`margin-right:${J.value}px;`,e+L.itemStyle})),V=t((()=>z(L.swiperWidth)));async function X(e,t=!1){let a=0,s=0,l=0,i=0,n=0;const r=D.value.scroll;if(r)n=r.left;else try{n=(await Z(-100)).left,D.value.scroll={left:n}}catch(y){}const o=D.value["item"+e];if(o)s=o.left,a=o.width,l=o.ind,i=o.indLeft;else try{const t=await Z(e);s=t.left-n,a=t.width,l=B.value?G.value:a,i=s+.5*(a-l),D.value["item"+e]={width:a,left:s,ind:l,indLeft:i}}catch(y){}const d=s+a+J.value;$.value=l,W.value=i;const c=N.value,u=d-(a/2+J.value)-c/2;u>0?A.value=u:0===A.value?A.value=.1:A.value=0}async function Y(){let e=0;try{e=(await Z(-100)).left,D.value.scroll={left:e}}catch(t){}for(const a in L.items)try{const t=await Z(a);let s=t.width;B.value&&(s=G.value),D.value["item"+a]={width:t.width,left:t.left-e,ind:s,indLeft:t.left-e+.5*(t.width-s)}}catch(t){}}function Z(e){return new Promise(((t,a)=>{let s="#item"+e;-100===e&&(s="#nscroll");l().in(q).select(s).fields({size:!0,rect:!0},(e=>{e?t(e):a({})})).exec()}))}return a((async()=>{L.delay>=0?setTimeout((async()=>{await Y(),X(L.value,!0)}),L.delay):(await Y(),X(L.value,!0))})),s((()=>L.value),(e=>{R&&clearTimeout(R),R=setTimeout((()=>{X(e),R=null}),0)})),s((()=>L.items),(()=>{D.value={},h((async()=>{L.updateDelay>=0?setTimeout((async()=>{await Y(),X(L.value,!0)}),L.updateDelay):(await Y(),X(L.value,!0))}))})),s((()=>L.offset),(e=>{!async function(e){const t=L.last;let a=t;if(e>-1&&e<1)return;e>0?a+=1:e<0&&(a-=1);const s=Math.abs(V.value/e);if(a>=L.items.length||a<0||t===a)return;const l=D.value["item"+t],i=D.value["item"+a];W.value=l.indLeft+(i.indLeft-l.indLeft)/s,$.value=l.ind+(i.ind-l.ind)/s}(e)})),s((()=>L.updateTime),(async()=>{D.value={},await Y(),X(L.value,!0)})),(e,t)=>{const a=m,s=S,l=I(w("n-badge"),_),u=y;return i(),n(u,{ref_key:"nscroll",ref:M,id:"nscroll","scroll-x":!0,"scroll-left":A.value,"scroll-with-animation":!0,"show-scrollbar":!1,class:o(["n-bg-"+e.bgType,"n-border-"+e.border,"n-flex-row","n-tabs-scroll",e.boxClass]),style:d(c(K))},{default:r((()=>[f(a,{class:"n-flex-column n-position-relative"},{default:r((()=>[e.hasIndicator&&!e.hoverTop?(i(),n(a,{key:0,ref_key:"nunderline",ref:H,class:o([e.absIndicator&&"n-tab-item-underline","n-bg-"+e.indicatorType,e.indicatorClass,e.isTap?"n-tab-item-animation":""]),style:d(c(F))},{default:r((()=>[p(e.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):x("",!0),f(a,{class:o(["n-flex-row","n-justify-"+e.justify,"n-wrap-nowrap",e.tabsClass]),style:d(c(Q))},{default:r((()=>[f(a,{class:"n-shrink-0",style:d({width:e.left})},null,8,["style"]),(i(!0),b(g,null,v(e.items,((t,u)=>(i(),n(a,{key:u,ref_for:!0,ref:e=>{},id:"item"+u,class:o(["n-flex-column","n-justify-center","n-align-center","n-position-relative",e.itemClass,u===e.value?e.activeItemClass:""]),style:d(c(U)+(u===e.value?e.activeItemStyle:"")+(u===e.items.length-1?"margin-right:0;":"")),onClick:e=>function(e){k("change",e)}(u)},{default:r((()=>[f(s,{class:o(["n-lines-nowrap","n-color-"+(u===e.value?e.activeTextType:e.textType),"n-size-"+(u===e.value?e.activeTextSize:e.textSize),e.textClass,u===e.value?e.activeTextClass:""]),style:d(e.textStyle+(u===e.value?e.activeTextStyle:""))},{default:r((()=>[T(C(e.textLabel?t[e.textLabel]:t),1)])),_:2},1032,["class","style"]),t.badge?(i(),n(l,{key:0,size:t.badge.size||e.badgeConfig.size||"12rpx",bgType:t.badge.bgType||e.badgeConfig.bgType||"error",text:t.badge.text||"",border:t.badge.border||e.badgeConfig.border||"none",textType:t.badge.textType||e.badgeConfig.textType||"inverse",textSize:t.badge.textSize||e.badgeConfig.textSize||"ss",textStyle:t.badge.textStyle||e.badgeConfig.textStyle||"",boxStyle:t.badge.boxStyle||e.badgeConfig.boxStyle||"",textClass:t.badge.textClass||e.badgeConfig.textClass||"",boxClass:t.badge.boxClass||e.badgeConfig.boxClass||""},null,8,["size","bgType","text","border","textType","textSize","textStyle","boxStyle","textClass","boxClass"])):x("",!0)])),_:2},1032,["id","class","style","onClick"])))),128)),f(a,{class:"n-shrink-0",style:d({width:e.right})},null,8,["style"])])),_:1},8,["class","style"]),e.hasIndicator&&e.hoverTop?(i(),n(a,{key:1,ref_key:"nunderline",ref:H,class:o([e.absIndicator&&"n-tab-item-underline","n-bg-"+e.indicatorType,e.indicatorClass,e.isTap?"n-tab-item-animation":""]),style:d(c(F))},{default:r((()=>[p(e.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):x("",!0)])),_:3})])),_:3},8,["scroll-left","class","style"])}}},[["__scopeId","data-v-8f4b1c55"]]);export{L as _};
