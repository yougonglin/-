import{_ as e}from"./n-icon.3d1c4127.js";import{r as a,l,m as t,o,c as s,w as n,q as i,t as c,i as r,e as u,v as p,x as d,y,a as b,j as f,A as v,aC as h}from"./index-93e08a2b.js";import{r as m}from"./uni-app.es.4a85af97.js";import{m as g}from"./props.e7779fd1.js";const x={__name:"n-input",props:g([["format",[]],["separator"," "],["type","text"],["maxlength",140],["isPassword",!1],["password",!1],["focus",!1],["disabled",!1],"icon","label","value",["placeholder","请输入内容"],"indicator",["valueAlign","left"],"bgType",["height","base"],"border","radius",["valueType","text"],["valueSize","base"],["iconType","text"],["iconSize","l"],["labelType","text"],["labelSize","base"],["indicatorType","text"],["indicatorSize","l"],["placeType","place"],["placeSize","base"],["adjust",!0],["cursorSpacing",0],["confirmType","done"],"contentType","iconStyle","iconBoxStyle","labelStyle","valueStyle","indicatorStyle","indicatorBoxStyle","boxStyle",["space","12rpx"],["placeStyle","white-space:nowrap;"],"iconClass","iconBoxClass","labelClass","valueClass","indicatorClass","indicatorBoxClass","boxClass","placeClass"]),emits:["keyboardHeightChange","update:value","formated","confirm","indicatorClicked","inputClicked","focus","blur"],setup(g,{expose:x,emit:S}){const C=g;x({nFocus:function(){},nBlur:function(){}});const z=a(C.value||""),T=a(C.value||"");a(null),a(null);const k=l((()=>C.separator&&C.separator.length>0&&C.format&&C.format.length>0));function j(e){S("focus",e)}function w(e){S("blur",e)}function B(e){S("keyboardHeightChange",e)}function _(e){const a=e.detail.value||"";k.value?(z.value=H(a),T.value=z.value.split(C.separator).join(""),S("update:value",T.value),S("formated",z.value)):(z.value=e.detail.value,S("update:value",e.detail.value))}function A(e){S("confirm",e.detail.value)}function I(){S("indicatorClicked")}function F(){C.disabled&&S("inputClicked")}function H(e){let a=e;if(k.value){const l=e.split(C.separator).join(""),t=l.length;C.format.length;let o=0;const s=[];for(const e in C.format){const a=C.format[e];if(!(t>o+a)){s.push(l.substr(o));break}s.push(l.substr(o,a)),o+=a}a=s.join(C.separator),a.length>C.maxlength&&(a=l)}return a}return l((()=>{if(!z.value)return!0;const e=z.value+"";return!(e&&e.length>0)})),k.value&&(z.value=H(C.value)),t((()=>C.value),(e=>{k.value?T.value!==e&&(T.value=e,z.value=H(e)):z.value!==e&&(z.value=e)})),(a,l)=>{const t=m(f("n-icon"),e),g=v,x=h,S=r;return o(),s(S,{class:i(["n-flex-row","n-align-center","n-wrap-nowrap","n-bg-"+a.bgType,"n-height-"+a.height,"n-radius-"+a.radius,"n-border-"+a.border,a.boxClass]),style:c(a.boxStyle),bubble:"true",onClick:F},{default:n((()=>[a.icon&&a.icon.length>0?(o(),s(t,{key:0,name:a.icon,type:a.iconType,size:a.iconSize,iconStyle:a.iconStyle,boxStyle:"margin-right:"+a.space+";"+a.iconBoxStyle,iconClass:a.iconClass,boxClass:a.iconBoxClass,onIconClicked:F},null,8,["name","type","size","iconStyle","boxStyle","iconClass","boxClass"])):u("",!0),p(a.$slots,"label",{},(()=>[a.label&&a.label.length>0?(o(),s(g,{key:0,class:i(["n-color-"+a.labelType,"n-size-"+a.labelSize,a.labelClass]),style:c("margin-right:"+a.space+";"+a.labelStyle)},{default:n((()=>[d(y(a.label||""),1)])),_:1},8,["class","style"])):u("",!0)])),b(x,{class:i(["n-flex-1","n-text-align-"+a.valueAlign,"n-color-"+a.valueType,"n-size-"+a.valueSize,a.valueClass]),disabled:a.disabled,focus:a.focus,type:a.type,"cursor-spacing":a.cursorSpacing,"adjust-position":a.adjust,"confirm-type":a.confirmType,maxlength:a.maxlength,value:z.value||"",password:a.password,placeholder:a.placeholder||"","placeholder-style":a.placeStyle,"placeholder-class":a.placeClass||"n-color-"+a.placeType,style:c(a.valueStyle),onInput:_,onConfirm:A,onFocus:j,onBlur:w,onKeyboardheightchange:B},null,8,["class","disabled","focus","type","cursor-spacing","adjust-position","confirm-type","maxlength","value","password","placeholder","placeholder-style","placeholder-class","style"]),p(a.$slots,"extra"),a.indicator&&a.indicator.length>0?(o(),s(t,{key:1,name:a.indicator,type:a.indicatorType,size:a.indicatorSize,iconStyle:a.indicatorStyle,boxStyle:"margin-left:"+a.space+";"+a.indicatorBoxStyle,onIconClicked:I},null,8,["name","type","size","iconStyle","boxStyle"])):u("",!0)])),_:3},8,["class","style"])}}};export{x as _};
