import{l as e,r as l,m as a,n as t,o as s,c as i,w as n,q as u,t as c,u as o,i as r,a as v,b as p,d as y,F as d,e as m,a5 as f,a6 as b,x,y as h,A as g,v as S,j as C}from"./index-93e08a2b.js";import{m as k}from"./props.e7779fd1.js";import{a as _}from"./system.0fbb2200.js";import{r as T}from"./uni-app.es.4a85af97.js";import{_ as P}from"./pcaLocalPick.ae9c32a5.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";const j={__name:"n-picker-content",props:k([["mode","s1"],["value",[0,0,0]],["bgType","inverse"],["textType","inverse"],["textSize","base"],["height","500rpx"],["itemHeight","100rpx"],"boxStyle","itemStyle","textStyle","indicatorStyle",["selections",[]],["labelProps",{s1:{label:"name",value:"id"},s2:{label:"name",value:"id",tag:"c"},s3:{label:"name",value:"id",tag:"a"}}],"boxClass","itemClass","textClass","indicatorClass"]),emits:["inited","change"],setup(S,{emit:C}){const k=S,T=e((()=>_(k.height))),P=e((()=>_(k.itemHeight))),z=e((()=>`height:${T.value}px;`+k.boxStyle)),j=e((()=>`height:${P.value}px;`+k.indicatorStyle)),w=e((()=>`height:${P.value}px;`+k.itemStyle)),H=e((()=>k.labelProps.s1&&k.labelProps.s1.label)),O=e((()=>k.labelProps.s2&&k.labelProps.s2.label)),J=e((()=>k.labelProps.s3&&k.labelProps.s3.label)),A=e((()=>k.labelProps.s1&&k.labelProps.s1.value)),B=e((()=>k.labelProps.s2&&k.labelProps.s2.value)),N=e((()=>k.labelProps.s3&&k.labelProps.s3.value)),V=e((()=>k.labelProps.s2&&k.labelProps.s2.tag)),$=e((()=>k.labelProps.s3&&k.labelProps.s3.tag)),I=l({}),L=l([]),R=l(""),q=l([]),F=l("");function Z(){let e={};const l=k.mode;let a,s,i,n=[];if("s1"!==l&&"s2"!==l&&"s3"!==l||k.selections){switch(l){case"s3":n=E(k.value);const l=(k.selections[n[0]]||{})[V.value]||[],a=(l[n[1]]||{})[$.value]||[];e={p:k.selections||[],c:l,a:a};break;case"s2":n=E(k.value),e={p:k.selections||[],c:(k.selections[n[0]]||{})[V.value]||[]};break;case"s1":n=E(k.value),e={p:k.selections||[]}}switch(I.value=e,l){case"s3":a=e.p[n[0]]||{},s=e.c[n[1]]||{},i=e.a[n[2]]||{},L.value=[a[H.value],s[O.value],i[J.value]],R.value=[a[A.value],s[B.value],i[N.value]],F.value=a[H.value]+s[O.value]+i[J.value];break;case"s2":a=e.p[n[0]]||{},s=e.c[n[1]]||{},L.value=[a[H.value],s[O.value]],R.value=[a[A.value],s[B.value]],F.value=a[H.value]+s[O.value];break;case"s1":a=e.p[n[0]]||e.p[e.p.length-1]||{},L.value=a[H.value],R.value=a[A.value],F.value=a[H.value]}C("inited",{checkArr:L.value,checkValue:R.value,defaultVal:n,result:F.value}),t((()=>{q.value=n}))}}function D(e){let l,a,t,s=Object.assign([],e.detail.value),i=L.value;switch(k.mode){case"s3":l=(I.value.p[s[0]]||{})[H.value],a=(I.value.c[s[1]]||{})[O.value],t=(I.value.a[s[2]]||{})[J.value],l!=i[0]&&(I.value.c=(I.value.p[s[0]]||{})[V.value],I.value.a=(I.value.c[s[1]]||{})[$.value],s[1]=0,s[2]=0,a=(I.value.c[s[1]]||{})[O.value],t=(I.value.a[s[2]]||{})[J.value]),a!=i[1]&&(I.value.a=(I.value.c[s[1]]||{})[$.value],s[2]=0,t=(I.value.a[s[2]]||{})[J.value]),L.value=[l,a,t],R.value=[(I.value.p[s[0]]||{})[A.value],(I.value.c[s[1]]||{})[B.value],(I.value.a[s[2]]||{})[N.value]],F.value=l+a+t;break;case"s2":l=(I.value.p[s[0]]||{})[H.value],a=(I.value.c[s[1]]||{})[O.value],l!=i[0]&&(I.value.c=(I.value.p[s[0]]||{})[V.value],s[1]=0,a=(I.value.c[s[1]]||{})[O.value]),L.value=[l,a],R.value=[(I.value.p[s[0]]||{})[A.value],(I.value.c[s[1]]||{})[B.value]],F.value=l+a;break;case"s1":l=I.value.p[s[0]]||I.value.p[I.value.p.length-1]||{},L.value=l[H.value],R.value=l[A.value],F.value=l[H.value]}q.value=s,C("change",{checkArr:L.value,checkValue:R.value,defaultVal:q.value,result:F.value})}function E(e){if("s3"===k.mode){let l=e[0],a=e[1],t=e[2];const s=k.selections;let i=[],n=[],u=!1,c=!1,o=!1;for(let e=0;e<s.length;e++){const a=s[e];if(a[A.value]===l){u=!0,l=e,i=a[V.value];break}}if(!u)return[0,0,0];for(let e=0;e<i.length;e++){const l=i[e];if(l[B.value]===a){c=!0,a=e,n=l[$.value];break}}if(!c)return[l,0,0];for(let e=0;e<n.length;e++){if(n[e][N.value]===t){o=!0,t=e;break}}return o?[l,a,t]:[l,a,0]}if("s2"===k.mode){let l=e[0],a=e[1];const t=k.selections;let s=[],i=!1,n=!1;for(let e=0;e<t.length;e++){const a=t[e];if(a[A.value]===l){i=!0,l=e,s=a[V.value];break}}if(!i)return[0,0];for(let e=0;e<s.length;e++){if(s[e][B.value]===a){n=!0,a=e;break}}return n?[l,a]:[l,0]}{let l=e[0];const a=k.selections;let t=!1;for(let e=0;e<a.length;e++){if(a[e][A.value]===l){t=!0,l=e;break}}return t?[l]:[0]}}return a((()=>k.mode),(()=>{Z()})),a((()=>k.selections),(()=>{Z()})),Z(),(e,l)=>{const a=g,t=r,S=f,C=b;return s(),i(t,{class:u(["n-overflow-hidden","n-flex-column","n-bg-"+e.bgType,e.boxClass]),style:c(o(z))},{default:n((()=>["s3"===e.mode||"s2"===e.mode||"s1"===e.mode?(s(),i(C,{key:0,class:"n-flex-1","indicator-class":e.indicatorClass,"indicator-style":o(j),value:q.value,onChange:D},{default:n((()=>[v(S,null,{default:n((()=>[(s(!0),p(d,null,y(I.value.p||[],((l,r)=>(s(),i(t,{class:u(["n-flex-column","n-align-center","n-justify-center",e.itemClass]),style:c(o(w)),key:r},{default:n((()=>[v(a,{class:u(["n-text-align-center","n-lines-1","n-color-"+e.textType,"n-size-"+e.textSize,e.textClass]),style:c(e.textStyle)},{default:n((()=>[x(h(l[o(H)]),1)])),_:2},1032,["class","style"])])),_:2},1032,["class","style"])))),128))])),_:1}),"s2"===e.mode||"s3"===e.mode?(s(),i(S,{key:0},{default:n((()=>[(s(!0),p(d,null,y(I.value.c||[],((l,r)=>(s(),i(t,{class:u(["n-flex-column","n-align-center","n-justify-center",e.itemClass]),style:c(o(w)),key:r},{default:n((()=>[v(a,{class:u(["n-picker-item-text","n-lines-1","n-color-"+e.textType,"n-size-"+e.textSize,e.textClass]),style:c(e.textStyle)},{default:n((()=>[x(h(l[o(O)]),1)])),_:2},1032,["class","style"])])),_:2},1032,["class","style"])))),128))])),_:1})):m("",!0),"s3"===e.mode?(s(),i(S,{key:1},{default:n((()=>[(s(!0),p(d,null,y(I.value.a||[],((l,r)=>(s(),i(t,{class:u(["n-flex-column","n-align-center","n-justify-center",e.itemClass]),style:c(o(w)),key:r},{default:n((()=>[v(a,{class:u(["n-picker-item-text","n-lines-1","n-color-"+e.textType,"n-size-"+e.textSize,e.textClass]),style:c(e.textStyle)},{default:n((()=>[x(h(l[o(J)]),1)])),_:2},1032,["class","style"])])),_:2},1032,["class","style"])))),128))])),_:1})):m("",!0)])),_:1},8,["indicator-class","indicator-style","value"])):m("",!0)])),_:1},8,["class","style"])}}},w=z({__name:"n-picker",props:k([["show",!1],["mode","s1"],["pHeight","600rpx"],["cancelText","取消"],["confirmText","确认"],"title",["cancelType","third"],["cancelSize","base"],"cancelStyle",["confirmType","primary"],["confirmSize","base"],"confirmStyle",["titleType","text"],["titleSize","base"],"titleStyle",["headerBorder","bottom"],["headerRadius","top-base"],["headerBgType","inverse"],"headerStyle",["value",[0,0,0,0,0,0,0]],["bgType","inverse"],["textType","text"],["textSize","base"],["height","500rpx"],["itemHeight","100rpx"],"boxStyle","itemStyle","textStyle","indicatorStyle",["selections",[]],["labelProps",{s1:{label:"name",value:"id"},s2:{label:"name",value:"id",tag:"c"},s3:{label:"name",value:"id",tag:"a"}}],"headerClass","cancelClass","titleClass","confirmClass","boxClass","itemClass","textClass","indicatorClass"]),emits:["confirm","cancel"],setup(e,{emit:a}){const t=l(null);function o(){a("confirm",t.value)}function p(){a("cancel")}function y(e){t.value=JSON.parse(JSON.stringify(e))}function d(e){t.value=JSON.parse(JSON.stringify(e))}return(e,l)=>{const a=g,t=r,m=T(C("n-picker-content"),j),f=T(C("n-popup-always"),P);return s(),i(f,{show:e.show,pos:"bottom",height:e.pHeight,onOverlayClicked:p},{default:n((()=>[S(e.$slots,"header",{},(()=>[v(t,{class:u([e.headerClass||"n-picker-header","n-flex-row","n-align-center","n-justify-center","n-bg-"+e.headerBgType,"n-border-"+e.headerBorder,"n-radius-"+e.headerRadius]),style:c(e.headerStyle)},{default:n((()=>[v(a,{class:u(["n-color-"+e.cancelType,"n-size-"+e.cancelSize,e.cancelClass]),style:c(e.cancelStyle),onClick:p},{default:n((()=>[x(h(e.cancelText),1)])),_:1},8,["class","style"]),v(a,{class:u(["n-flex-1","n-color-"+e.titleType,"n-size-"+e.titleSize,"n-text-align-center",e.titleClass]),style:c(e.titleStyle)},{default:n((()=>[x(h(e.title),1)])),_:1},8,["class","style"]),v(a,{class:u(["n-color-"+e.confirmType,"n-size-"+e.confirmSize,e.confirmClass]),style:c(e.confirmStyle),onClick:o},{default:n((()=>[x(h(e.confirmText),1)])),_:1},8,["class","style"])])),_:1},8,["class","style"])]),!0),v(m,{mode:e.mode,selections:e.selections,labelProps:e.labelProps,value:e.value,bgType:e.bgType,textType:e.textType,textSize:e.textSize,height:e.height,itemHeight:e.itemHeight,boxStyle:e.boxStyle,itemStyle:e.itemStyle,textStyle:e.textStyle,indicatorStyle:e.indicatorStyle,boxClass:e.boxClass,itemClass:e.itemClass,textClass:e.textClass,indicatorClass:e.indicatorClass,onInited:y,onChange:d},null,8,["mode","selections","labelProps","value","bgType","textType","textSize","height","itemHeight","boxStyle","itemStyle","textStyle","indicatorStyle","boxClass","itemClass","textClass","indicatorClass"])])),_:3},8,["show","height"])}}},[["__scopeId","data-v-9a8e733e"]]);export{w as _};
