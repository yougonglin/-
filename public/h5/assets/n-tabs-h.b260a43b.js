import{r as e,d as t,_ as a,J as s,z as l,o as i,c as n,w as r,e as o,f as d,u as c,a0 as u,a1 as y,a as f,q as x,l as p,g as b,h as v,F as g,Z as h,i as m,b as w,k as T,t as C,m as S}from"./index-dd065053.js";import{_}from"./n-badge.07ff5dac.js";import{r as z,_ as I}from"./uni-app.es.ce8d824d.js";import{g as k}from"./system.bd116065.js";import{m as j}from"./n-icon.66eb4db5.js";const $=I({__name:"n-tabs-h",props:j([["items",[]],["value",0],["last",0],"textLabel",["offset",0],["swiperWidth","750rpx"],["isTap",!0],["justify","start"],["scrollSize","750rpx"],["textSize","base"],["activeTextSize","base"],["bgType","inverse"],["textType","text"],["activeTextType","primary"],["height","80rpx"],["width","120rpx"],["left","0"],["right","0"],["space","0px"],"border",["badgeConfig",{}],["hasIndicator",!0],["indicatorType","primary"],["indicatorWidth","80rpx"],["indicatorHeight","5rpx"],["indicatorRadius","4rpx"],["absIndicator",!0],"boxStyle","tabsStyle","textStyle","activeTextStyle","itemStyle","activeItemStyle","indicatorStyle",["updateTime",0],["delay",-1],["updateDelay",-1],["hoverTop",!1],"boxClass","tabsClass","textClass","activeTextClass","itemClass","activeItemClass","indicatorClass"]),emits:["update:value","change"],setup(I,{emit:j}){const $=I,L=e(0),W=e(0),D=e({}),H=e(0),R=e(null),q=e(null);let F=null;const{proxy:J}=u();const M=t((()=>{let e=`border-radius:${$.indicatorRadius};`;return e+=`height:${$.indicatorHeight};`,e+=`width:${L.value}px;`,e+=`left:${W.value}px;`,e+$.indicatorStyle})),P=t((()=>k($.space))),Z=t((()=>k($.scrollSize))),A=t((()=>k($.width))),B=t((()=>k($.height))),E=t((()=>{if(parseInt($.indicatorWidth)>0)return!0;return parseInt($.width)>0})),G=t((()=>{if(parseInt($.indicatorWidth)>0)return $.indicatorWidth;return parseInt($.width)>0?$.width:"0"})),K=t((()=>k(G.value))),N=t((()=>"width:"+Z.value+"px;"+$.boxStyle)),O=t((()=>{let e="";return"start"!=$.justify&&(e+="width:"+Z.value+"px;"),e+$.tabsStyle})),Q=t((()=>{let e=`height:${B.value}px;`;return e+=parseInt($.width)>0?`width:${A.value}px;margin-right:${P.value}px;`:`margin-right:${P.value}px;`,e+$.itemStyle})),U=t((()=>k($.swiperWidth)));async function V(e,t=!1){let a=0,s=0,l=0,i=0,n=0;const r=D.value.scroll;if(r)n=r.left;else try{n=(await Y(-100)).left,D.value.scroll={left:n}}catch(y){}const o=D.value["item"+e];if(o)s=o.left,a=o.width,l=o.ind,i=o.indLeft;else try{const t=await Y(e);s=t.left-n,a=t.width,l=E.value?K.value:a,i=s+.5*(a-l),D.value["item"+e]={width:a,left:s,ind:l,indLeft:i}}catch(y){}const d=s+a+P.value;L.value=l,W.value=i;const c=Z.value,u=d-(a/2+P.value)-c/2;u>0?H.value=u:0===H.value?H.value=.1:H.value=0}async function X(){let e=0;try{e=(await Y(-100)).left,D.value.scroll={left:e}}catch(t){}for(const a in $.items)try{const t=await Y(a);let s=t.width;E.value&&(s=K.value),D.value["item"+a]={width:t.width,left:t.left-e,ind:s,indLeft:t.left-e+.5*(t.width-s)}}catch(t){}}function Y(e){return new Promise(((t,a)=>{let s="#item"+e;-100===e&&(s="#nscroll");l().in(J).select(s).fields({size:!0,rect:!0},(e=>{e?t(e):a({})})).exec()}))}return a((async()=>{$.delay>=0?setTimeout((async()=>{await X(),V($.value,!0)}),$.delay):(await X(),V($.value,!0))})),s((()=>$.value),(e=>{F&&clearTimeout(F),F=setTimeout((()=>{V(e),F=null}),0)})),s((()=>$.items),(()=>{D.value={},h((async()=>{$.updateDelay>=0?setTimeout((async()=>{await X(),V($.value,!0)}),$.updateDelay):(await X(),V($.value,!0))}))})),s((()=>$.offset),(e=>{!async function(e){const t=$.last;let a=t;if(e>-1&&e<1)return;e>0?a+=1:e<0&&(a-=1);const s=Math.abs(U.value/e);if(a>=$.items.length||a<0||t===a)return;const l=D.value["item"+t],i=D.value["item"+a];W.value=l.indLeft+(i.indLeft-l.indLeft)/s,L.value=l.ind+(i.ind-l.ind)/s}(e)})),s((()=>$.updateTime),(async()=>{D.value={},await X(),V($.value,!0)})),(e,t)=>{const a=m,s=S,l=z(w("n-badge"),_),u=y;return i(),n(u,{ref_key:"nscroll",ref:q,id:"nscroll","scroll-x":!0,"scroll-left":H.value,"scroll-with-animation":!0,"show-scrollbar":!1,class:o(["n-bg-"+e.bgType,"n-border-"+e.border,"n-flex-row","n-tabs-scroll",e.boxClass]),style:d(c(N))},{default:r((()=>[f(a,{class:"n-flex-column n-position-relative"},{default:r((()=>[e.hasIndicator&&!e.hoverTop?(i(),n(a,{key:0,ref_key:"nunderline",ref:R,class:o([e.absIndicator&&"n-tab-item-underline","n-bg-"+e.indicatorType,e.indicatorClass,e.isTap?"n-tab-item-animation":""]),style:d(c(M))},{default:r((()=>[x(e.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):p("",!0),f(a,{class:o(["n-flex-row","n-justify-"+e.justify,"n-wrap-nowrap",e.tabsClass]),style:d(c(O))},{default:r((()=>[f(a,{class:"n-shrink-0",style:d({width:e.left})},null,8,["style"]),(i(!0),b(g,null,v(e.items,((t,u)=>(i(),n(a,{key:u,ref_for:!0,ref:e=>{},id:"item"+u,class:o(["n-flex-column","n-justify-center","n-align-center","n-position-relative",e.itemClass,u===e.value?e.activeItemClass:""]),style:d(c(Q)+(u===e.value?e.activeItemStyle:"")+(u===e.items.length-1?"margin-right:0;":"")),onClick:e=>function(e){j("change",e)}(u)},{default:r((()=>[f(s,{class:o(["n-lines-nowrap","n-color-"+(u===e.value?e.activeTextType:e.textType),"n-size-"+(u===e.value?e.activeTextSize:e.textSize),e.textClass,u===e.value?e.activeTextClass:""]),style:d(e.textStyle+(u===e.value?e.activeTextStyle:""))},{default:r((()=>[T(C(e.textLabel?t[e.textLabel]:t),1)])),_:2},1032,["class","style"]),t.badge?(i(),n(l,{key:0,size:t.badge.size||e.badgeConfig.size||"12rpx",bgType:t.badge.bgType||e.badgeConfig.bgType||"error",text:t.badge.text||"",border:t.badge.border||e.badgeConfig.border||"none",textType:t.badge.textType||e.badgeConfig.textType||"inverse",textSize:t.badge.textSize||e.badgeConfig.textSize||"ss",textStyle:t.badge.textStyle||e.badgeConfig.textStyle||"",boxStyle:t.badge.boxStyle||e.badgeConfig.boxStyle||"",textClass:t.badge.textClass||e.badgeConfig.textClass||"",boxClass:t.badge.boxClass||e.badgeConfig.boxClass||""},null,8,["size","bgType","text","border","textType","textSize","textStyle","boxStyle","textClass","boxClass"])):p("",!0)])),_:2},1032,["id","class","style","onClick"])))),128)),f(a,{class:"n-shrink-0",style:d({width:e.right})},null,8,["style"])])),_:1},8,["class","style"]),e.hasIndicator&&e.hoverTop?(i(),n(a,{key:1,ref_key:"nunderline",ref:R,class:o([e.absIndicator&&"n-tab-item-underline","n-bg-"+e.indicatorType,e.indicatorClass,e.isTap?"n-tab-item-animation":""]),style:d(c(M))},{default:r((()=>[x(e.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):p("",!0)])),_:3})])),_:3},8,["scroll-left","class","style"])}}},[["__scopeId","data-v-6f0df1de"]]);export{$ as _};
