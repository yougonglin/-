import{d as e,r as l,J as a,Z as t,o as s,c as u,w as n,e as o,f as i,u as r,i as v,a as c,g as p,h as f,F as y,l as m,P as h,s as x,k as d,t as b,m as g,_ as S,j as C,q as k,b as T}from"./index-dd065053.js";import{m as _}from"./n-icon.66eb4db5.js";import{g as P,a as $}from"./system.bd116065.js";import{r as w,_ as z}from"./uni-app.es.ce8d824d.js";const O={__name:"n-picker-content",props:_([["mode","s1"],["value",[0,0,0]],["bgType","inverse"],["textType","inverse"],["textSize","base"],["height","500rpx"],["itemHeight","100rpx"],"boxStyle","itemStyle","textStyle","indicatorStyle",["selections",[]],["labelProps",{s1:{label:"name",value:"id"},s2:{label:"name",value:"id",tag:"c"},s3:{label:"name",value:"id",tag:"a"}}],"boxClass","itemClass","textClass","indicatorClass"]),emits:["inited","change"],setup(S,{emit:C}){const k=S,T=e((()=>P(k.height))),_=e((()=>P(k.itemHeight))),$=e((()=>`height:${T.value}px;`+k.boxStyle)),w=e((()=>`height:${_.value}px;`+k.indicatorStyle)),z=e((()=>`height:${_.value}px;`+k.itemStyle)),O=e((()=>k.labelProps.s1&&k.labelProps.s1.label)),j=e((()=>k.labelProps.s2&&k.labelProps.s2.label)),H=e((()=>k.labelProps.s3&&k.labelProps.s3.label)),F=e((()=>k.labelProps.s1&&k.labelProps.s1.value)),A=e((()=>k.labelProps.s2&&k.labelProps.s2.value)),D=e((()=>k.labelProps.s3&&k.labelProps.s3.value)),J=e((()=>k.labelProps.s2&&k.labelProps.s2.tag)),W=e((()=>k.labelProps.s3&&k.labelProps.s3.tag)),X=l({}),Y=l([]),B=l(""),N=l([]),V=l("");function I(){let e={};const l=k.mode;let a,s,u,n=[];if("s1"!==l&&"s2"!==l&&"s3"!==l||k.selections){switch(l){case"s3":n=q(k.value);const l=(k.selections[n[0]]||{})[J.value]||[],a=(l[n[1]]||{})[W.value]||[];e={p:k.selections||[],c:l,a:a};break;case"s2":n=q(k.value),e={p:k.selections||[],c:(k.selections[n[0]]||{})[J.value]||[]};break;case"s1":n=q(k.value),e={p:k.selections||[]}}switch(X.value=e,l){case"s3":a=e.p[n[0]]||{},s=e.c[n[1]]||{},u=e.a[n[2]]||{},Y.value=[a[O.value],s[j.value],u[H.value]],B.value=[a[F.value],s[A.value],u[D.value]],V.value=a[O.value]+s[j.value]+u[H.value];break;case"s2":a=e.p[n[0]]||{},s=e.c[n[1]]||{},Y.value=[a[O.value],s[j.value]],B.value=[a[F.value],s[A.value]],V.value=a[O.value]+s[j.value];break;case"s1":a=e.p[n[0]]||e.p[e.p.length-1]||{},Y.value=a[O.value],B.value=a[F.value],V.value=a[O.value]}C("inited",{checkArr:Y.value,checkValue:B.value,defaultVal:n,result:V.value}),t((()=>{N.value=n}))}}function R(e){let l,a,t,s=Object.assign([],e.detail.value),u=Y.value;switch(k.mode){case"s3":l=(X.value.p[s[0]]||{})[O.value],a=(X.value.c[s[1]]||{})[j.value],t=(X.value.a[s[2]]||{})[H.value],l!=u[0]&&(X.value.c=(X.value.p[s[0]]||{})[J.value],X.value.a=(X.value.c[s[1]]||{})[W.value],s[1]=0,s[2]=0,a=(X.value.c[s[1]]||{})[j.value],t=(X.value.a[s[2]]||{})[H.value]),a!=u[1]&&(X.value.a=(X.value.c[s[1]]||{})[W.value],s[2]=0,t=(X.value.a[s[2]]||{})[H.value]),Y.value=[l,a,t],B.value=[(X.value.p[s[0]]||{})[F.value],(X.value.c[s[1]]||{})[A.value],(X.value.a[s[2]]||{})[D.value]],V.value=l+a+t;break;case"s2":l=(X.value.p[s[0]]||{})[O.value],a=(X.value.c[s[1]]||{})[j.value],l!=u[0]&&(X.value.c=(X.value.p[s[0]]||{})[J.value],s[1]=0,a=(X.value.c[s[1]]||{})[j.value]),Y.value=[l,a],B.value=[(X.value.p[s[0]]||{})[F.value],(X.value.c[s[1]]||{})[A.value]],V.value=l+a;break;case"s1":l=X.value.p[s[0]]||X.value.p[X.value.p.length-1]||{},Y.value=l[O.value],B.value=l[F.value],V.value=l[O.value]}N.value=s,C("change",{checkArr:Y.value,checkValue:B.value,defaultVal:N.value,result:V.value})}function q(e){if("s3"===k.mode){let l=e[0],a=e[1],t=e[2];const s=k.selections;let u=[],n=[],o=!1,i=!1,r=!1;for(let e=0;e<s.length;e++){const a=s[e];if(a[F.value]===l){o=!0,l=e,u=a[J.value];break}}if(!o)return[0,0,0];for(let e=0;e<u.length;e++){const l=u[e];if(l[A.value]===a){i=!0,a=e,n=l[W.value];break}}if(!i)return[l,0,0];for(let e=0;e<n.length;e++){if(n[e][D.value]===t){r=!0,t=e;break}}return r?[l,a,t]:[l,a,0]}if("s2"===k.mode){let l=e[0],a=e[1];const t=k.selections;let s=[],u=!1,n=!1;for(let e=0;e<t.length;e++){const a=t[e];if(a[F.value]===l){u=!0,l=e,s=a[J.value];break}}if(!u)return[0,0];for(let e=0;e<s.length;e++){if(s[e][A.value]===a){n=!0,a=e;break}}return n?[l,a]:[l,0]}{let l=e[0];const a=k.selections;let t=!1;for(let e=0;e<a.length;e++){if(a[e][F.value]===l){t=!0,l=e;break}}return t?[l]:[0]}}return a((()=>k.mode),(()=>{I()})),a((()=>k.selections),(()=>{I()})),I(),(e,l)=>{const a=g,t=v,S=h,C=x;return s(),u(t,{class:o(["n-overflow-hidden","n-flex-column","n-bg-"+e.bgType,e.boxClass]),style:i(r($))},{default:n((()=>["s3"===e.mode||"s2"===e.mode||"s1"===e.mode?(s(),u(C,{key:0,class:"n-flex-1","indicator-class":e.indicatorClass,"indicator-style":r(w),value:N.value,onChange:R},{default:n((()=>[c(S,null,{default:n((()=>[(s(!0),p(y,null,f(X.value.p||[],((l,v)=>(s(),u(t,{class:o(["n-flex-column","n-align-center","n-justify-center",e.itemClass]),style:i(r(z)),key:v},{default:n((()=>[c(a,{class:o(["n-text-align-center","n-lines-1","n-color-"+e.textType,"n-size-"+e.textSize,e.textClass]),style:i(e.textStyle)},{default:n((()=>[d(b(l[r(O)]),1)])),_:2},1032,["class","style"])])),_:2},1032,["class","style"])))),128))])),_:1}),"s2"===e.mode||"s3"===e.mode?(s(),u(S,{key:0},{default:n((()=>[(s(!0),p(y,null,f(X.value.c||[],((l,v)=>(s(),u(t,{class:o(["n-flex-column","n-align-center","n-justify-center",e.itemClass]),style:i(r(z)),key:v},{default:n((()=>[c(a,{class:o(["n-picker-item-text","n-lines-1","n-color-"+e.textType,"n-size-"+e.textSize,e.textClass]),style:i(e.textStyle)},{default:n((()=>[d(b(l[r(j)]),1)])),_:2},1032,["class","style"])])),_:2},1032,["class","style"])))),128))])),_:1})):m("",!0),"s3"===e.mode?(s(),u(S,{key:1},{default:n((()=>[(s(!0),p(y,null,f(X.value.a||[],((l,v)=>(s(),u(t,{class:o(["n-flex-column","n-align-center","n-justify-center",e.itemClass]),style:i(r(z)),key:v},{default:n((()=>[c(a,{class:o(["n-picker-item-text","n-lines-1","n-color-"+e.textType,"n-size-"+e.textSize,e.textClass]),style:i(e.textStyle)},{default:n((()=>[d(b(l[r(H)]),1)])),_:2},1032,["class","style"])])),_:2},1032,["class","style"])))),128))])),_:1})):m("",!0)])),_:1},8,["indicator-class","indicator-style","value"])):m("",!0)])),_:1},8,["class","style"])}}},j={__name:"n-popup-always",props:_([["show",!1],["pos","bottom"],"bgType",["duration",300],["hasOverlay",!0],["overlay",{hasAnimation:!0,timingFunction:["ease-in","ease-out"],duration:300,bg:"",bgType:"mask"}],["ani",{timingFunction:"ease-out"}],["baseWidth","750rpx"],["baseHeight","window"],["width","750rpx"],["height","0"],["standout","0"],["leftOffset","-1"],["rightOffset","-1"],["bottomOffset","-1"],["topOffset","-1"],["left","0"],["right","0"],["top","0"],["bottom","0"],["initWithAni",!0],["initDelay",200],["initDuration",300],"boxStyle","overlayClass","boxClass"]),emits:["overlayClicked"],setup(t,{emit:p}){const f=t;l(!1),l(!1);const y=l(""),h=l(""),x=l(!1),d=l(null),b=l(null),g=e((()=>$(f.baseHeight))),T=e((()=>$(f.baseWidth))),_=e((()=>{let e={width:`${j.value}px`,height:`${O.value}px`};const l=f.pos;l.endsWith("center")&&("center"===l||"scale-center"===l?(e.left=.5*(T.value-j.value)+"px",A.value<0&&J.value<0?e.top=.5*(g.value-O.value)+"px":A.value>=0?e.top=.5*(g.value-O.value)+A.value+"px":J.value>=0&&(e.top=.5*(g.value-O.value)-J.value+"px"),"center"===l&&(e.opacity=0,e.transform="scale(0,0)"),"scale-center"===l&&(e.transform="scale(0,0)")):"left-center"===l||"right-center"===l?(A.value<0&&J.value<0?e.top=.5*(g.value-O.value)+"px":A.value>=0?e.top=.5*(g.value-O.value)+A.value+"px":J.value>=0&&(e.top=.5*(g.value-O.value)-J.value+"px"),"left-center"===l&&(e.left=-j.value+"px"),"right-center"===l&&(e.right=-j.value+"px")):"top-center"!==l&&"bottom-center"!==l||(e.left=.5*(T.value-j.value)+"px","top-center"===l&&(e.top=-O.value+"px"),"bottom-center"===l&&(e.bottom=-O.value+"px"))),"top"!==l&&"bottom"!==l||(F.value<0&&D.value<0?e.left=.5*(T.value-W.value-Y.value-j.value)+"px":F.value>=0?e.left=W.value+F.value+"px":D.value>=0&&(e.right=Y.value+D.value+"px"),"top"===l&&(e.top=-O.value+"px"),"bottom"===l&&(e.bottom=-O.value+"px")),"left"!==l&&"right"!==l||(A.value<0&&J.value<0?e.top=.5*(g.value-X.value-B.value-O.value)+"px":A.value>=0?e.top=X.value+A.value+"px":J.value>=0&&(e.bottom=B.value+J.value+"px"),"left"===l&&(e.left=-j.value+"px"),"right"===l&&(e.right=-j.value+"px"));let a="";for(const t in e)a+=t+":"+e[t]+";";return a})),w=e((()=>g.value-X.value-B.value)),z=e((()=>`left:${W.value}px;top:${X.value}px;right:${Y.value}px;`)),O=e((()=>{if(1*f.height>0&&1*f.height<=1)return g.value*(1*f.height);const e=$(f.height);return e>1?e:e<=0?g.value-X.value-B.value-(A.value>=0?A.value:0)-(J.value>=0?J.value:0):g.value*e})),j=e((()=>{const e=P(f.width);return e<=0?T.value-W.value-Y.value-(F.value>=0?F.value:0)-(D.value>=0?D.value:0):e})),H=e((()=>$(f.standout))),F=e((()=>"-1"===f.leftOffset?-1:P(f.leftOffset))),A=e((()=>"-1"===f.topOffset?-1:$(f.topOffset))),D=e((()=>"-1"===f.rightOffset?-1:P(f.rightOffset))),J=e((()=>"-1"===f.bottomOffset?-1:$(f.bottomOffset))),W=e((()=>P(f.left))),X=e((()=>$(f.top))),Y=e((()=>P(f.right))),B=e((()=>$(f.bottom)));function N(){let e=0;f.initWithAni&&(e=f.initDuration||0),y.value=`transition-property: transform;transition-duration:${e}ms;transition-timing-function: ${f.ani.timingFunction};transform:translate${"top"==f.pos||"bottom"==f.pos?"Y":"X"}(${"top"==f.pos||"left"==f.pos?H.value:-1*H.value}px);`}function V(e){e.stopPropagation&&e.stopPropagation(),x.value&&p("overlayClicked",{})}function I(e){e.stopPropagation&&e.stopPropagation()}return a((()=>f.show),(e=>{(function(e,l=f.duration){!function(e,l=f.duration){x.value=e;let a="transition-duration:"+l+"ms;";if(a+="transition-timing-function:"+f.ani.timingFunction+";","center"===f.pos?(a+=e?"transform: scale(1,1);":"",a+="transition-property:opacity;",a+="opacity:"+(e?1:0)+";"):(a+="transition-property:transform;",a+="transform:"+function(e,l){let a=H.value,t="";switch(e){case"top":l||(a=O.value+X.value+(A.value>=0?A.value:0)),t=`translateY(${a}px)`;break;case"bottom":l||(a=O.value+B.value+(J.value>=0?J.value:0)),t=`translateY(-${a}px)`;break;case"left":l||(a=j.value+W.value+(F.value>=0?F.value:0)),t=`translateX(${a}px)`;break;case"right":l||(a=j.value+Y.value+(D.value>=0?D.value:0)),t=`translateX(-${a}px)`;break;case"scale-center":t=l?"scale(0,0)":"scale(1,1)";break;case"left-center":l||(a=.5*(T.value+j.value)),t=`translateX(${a}px)`;break;case"right-center":l||(a=.5*(T.value+j.value)),t=`translateX(-${a}px)`;break;case"top-center":l||(A.value<0&&J.value<0?a=.5*(g.value+O.value):A.value>=0?a=.5*(g.value+O.value)+A.value:J.value>=0&&(a=.5*(g.value+O.value)-J.value)),t=`translateY(${a}px)`;break;case"bottom-center":l||(A.value<0&&J.value<0?a=.5*(g.value+O.value):A.value>=0?a=.5*(g.value+O.value)-A.value:J.value>=0&&(a=.5*(g.value+O.value)+J.value)),t=`translateY(-${a}px)`}return t}(f.pos,!e)+";"),y.value=a,!f.hasOverlay)return;let t="transition-duration:"+f.overlay.duration+"ms;";e&&(t+=`height:${w.value}px;`),t+="transition-timing-function:"+(e?f.overlay.timingFunction[0]:f.overlay.timingFunction[1])+";",t+="transition-property:opacity;",t+="opacity:"+(e?1:0)+";",h.value=t,setTimeout((()=>{!e&&(h.value="")}),f.overlay.duration)}(e,l)})(e)})),S((()=>{H.value<=0||(f.initDelay>=0?setTimeout((()=>{N()}),f.initDelay):N())})),(e,l)=>{const a=v;return s(),u(a,null,{default:n((()=>[e.hasOverlay?(s(),u(a,{key:0,ref_key:"npopooverlay",ref:b,class:o(["n-position-fixed","n-height-0","n-opacity-0","n-zindex-pop-always-overlay","n-bg-"+e.overlay.bgType,e.overlayClass]),onTouchmove:C(I,["stop"]),onClick:C(V,["stop"]),style:i(r(z)+h.value)},{default:n((()=>[k(e.$slots,"overlay")])),_:3},8,["class","onTouchmove","onClick","style"])):m("",!0),c(a,{ref_key:"npopo",ref:d,onTouchmove:C(I,["stop"]),onClick:C(I,["stop"]),class:o(["n-position-fixed","n-width-750rpx","n-zindex-pop-always","n-flex-column","n-bg-"+e.bgType,e.boxClass]),style:i(e.boxStyle+r(_)+y.value)},{default:n((()=>[k(e.$slots,"default")])),_:3},8,["onTouchmove","onClick","class","style"])])),_:3})}}},H=z({__name:"n-picker",props:_([["show",!1],["mode","s1"],["pHeight","600rpx"],["cancelText","取消"],["confirmText","确认"],"title",["cancelType","third"],["cancelSize","base"],"cancelStyle",["confirmType","primary"],["confirmSize","base"],"confirmStyle",["titleType","text"],["titleSize","base"],"titleStyle",["headerBorder","bottom"],["headerRadius","top-base"],["headerBgType","inverse"],"headerStyle",["value",[0,0,0,0,0,0,0]],["bgType","inverse"],["textType","text"],["textSize","base"],["height","500rpx"],["itemHeight","100rpx"],"boxStyle","itemStyle","textStyle","indicatorStyle",["selections",[]],["labelProps",{s1:{label:"name",value:"id"},s2:{label:"name",value:"id",tag:"c"},s3:{label:"name",value:"id",tag:"a"}}],"headerClass","cancelClass","titleClass","confirmClass","boxClass","itemClass","textClass","indicatorClass"]),emits:["confirm","cancel"],setup(e,{emit:a}){const t=l(null);function r(){a("confirm",t.value)}function p(){a("cancel")}function f(e){t.value=JSON.parse(JSON.stringify(e))}function y(e){t.value=JSON.parse(JSON.stringify(e))}return(e,l)=>{const a=g,t=v,m=w(T("n-picker-content"),O),h=w(T("n-popup-always"),j);return s(),u(h,{show:e.show,pos:"bottom",height:e.pHeight,onOverlayClicked:p},{default:n((()=>[k(e.$slots,"header",{},(()=>[c(t,{class:o([e.headerClass||"n-picker-header","n-flex-row","n-align-center","n-justify-center","n-bg-"+e.headerBgType,"n-border-"+e.headerBorder,"n-radius-"+e.headerRadius]),style:i(e.headerStyle)},{default:n((()=>[c(a,{class:o(["n-color-"+e.cancelType,"n-size-"+e.cancelSize,e.cancelClass]),style:i(e.cancelStyle),onClick:p},{default:n((()=>[d(b(e.cancelText),1)])),_:1},8,["class","style"]),c(a,{class:o(["n-flex-1","n-color-"+e.titleType,"n-size-"+e.titleSize,"n-text-align-center",e.titleClass]),style:i(e.titleStyle)},{default:n((()=>[d(b(e.title),1)])),_:1},8,["class","style"]),c(a,{class:o(["n-color-"+e.confirmType,"n-size-"+e.confirmSize,e.confirmClass]),style:i(e.confirmStyle),onClick:r},{default:n((()=>[d(b(e.confirmText),1)])),_:1},8,["class","style"])])),_:1},8,["class","style"])]),!0),c(m,{mode:e.mode,selections:e.selections,labelProps:e.labelProps,value:e.value,bgType:e.bgType,textType:e.textType,textSize:e.textSize,height:e.height,itemHeight:e.itemHeight,boxStyle:e.boxStyle,itemStyle:e.itemStyle,textStyle:e.textStyle,indicatorStyle:e.indicatorStyle,boxClass:e.boxClass,itemClass:e.itemClass,textClass:e.textClass,indicatorClass:e.indicatorClass,onInited:f,onChange:y},null,8,["mode","selections","labelProps","value","bgType","textType","textSize","height","itemHeight","boxStyle","itemStyle","textStyle","indicatorStyle","boxClass","itemClass","textClass","indicatorClass"])])),_:3},8,["show","height"])}}},[["__scopeId","data-v-51bb600f"]]);export{H as _};
